<template>
  <v-container class="home" fluid>
    <div class="page-enter-animation">
      <v-row justify="center" align="center" style="height: 100vh">
        <v-col cols="12" sm="8" md="6">
          <h1 class="text-center h11">æ¬¢è¿æ¥åˆ°<span class="text-gradient">å¹»äº‘ç§‘æŠ€</span></h1>
          <p class="text-center p11">
            å¼€å¯æ‚¨çš„åˆ›æ–°ä¹‹æ—…ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å°†å‘ç°ä¸€ä¸ªå……æ»¡æ— é™å¯èƒ½æ€§çš„ç©ºé—´ï¼Œæ—¨åœ¨æ¿€å‘æ‚¨çš„åˆ›æ„ç«èŠ±ï¼Œæå‡å·¥ä½œæ•ˆç‡ã€‚
          </p>
        </v-col>
      </v-row>
    </div>

    <section class="features-section py-16">
      <v-container>
        <v-row justify="center" class="mb-12">
          <v-col cols="12" md="8">
            <h2 class="text-h3 font-weight-light text-center section-title-animation">
              æˆ‘ä»¬çš„<span class="font-weight-bold primary--text">ç‰¹è‰²</span>
            </h2>
            <p class="text-subtitle-1 text-center mt-4 grey--text text--darken-1">
              æ¢ç´¢å¹»äº‘ç§‘æŠ€ä¸ºæ‚¨å¸¦æ¥çš„ç‹¬ç‰¹ä¼˜åŠ¿
            </p>
          </v-col>
        </v-row>

        <v-row class="card-animation">
          <v-col v-for="card in cards" :key="card.id" cols="12" sm="6" md="4" class="mb-6">
            <v-card class="feature-card fill-height d-flex flex-column" elevation="2">
              <v-card-text>
                <div class="d-flex align-center mb-4">
                  <v-avatar :color="card.color" size="48" class="mr-4">
                    <v-icon dark>{{ card.icon }}</v-icon>
                  </v-avatar>
                  <h3 class="text-h5 font-weight-medium">{{ card.title }}</h3>
                </div>
                <p class="body-1 grey--text text--darken-1">{{ card.description }}</p>
              </v-card-text>
              <v-card-actions>
                <v-btn text :color="card.color" class="ml-2 mt-2">
                  äº†è§£æ›´å¤š
                  <v-icon right small>mdi-arrow-right</v-icon>
                </v-btn>
              </v-card-actions>
            </v-card>
          </v-col>
        </v-row>
      </v-container>
    </section>

    <v-row>
      <v-col cols="12">
        <h2 class="text-center section-title-animation">æˆ‘ä»¬çš„æ¨¡æ¿æ”¯æŒè¯­è¨€</h2>
      </v-col>
    </v-row>

    <div class="language-icons-animation">
      <!-- å‰ç«¯æŠ€æœ¯å¡ç‰‡ -->
      <v-col cols="12" sm="140">
        <v-card class="card-hover front-end" elevation="4">
          <p class="text-center">å‰ç«¯</p>
          <div class="language-icons">
            <img v-for="icon in FrontendIcons" :key="icon.icon" :src="`https://cdn.jsdelivr.net/npm/simple-icons@11.14.0/icons/${icon.icon}.svg`" :alt="icon.title" />
          </div>
        </v-card>
      </v-col>

      <!-- åç«¯æŠ€æœ¯å¡ç‰‡ -->
      <v-col cols="12" sm="140">
        <v-card class="card-hover back-end" elevation="4">
          <p class="text-center">åç«¯</p>
          <div class="language-icons">
            <img v-for="icon in BackendIcons" :key="icon.icon" :src="`https://cdn.jsdelivr.net/npm/simple-icons@11.14.0/icons/${icon.icon}.svg`" :alt="icon.title" />
          </div>
        </v-card>
      </v-col>

      <!-- å…¨æ ˆæŠ€æœ¯å¡ç‰‡ -->
      <v-col cols="12" sm="140">
        <v-card class="card-hover full-stack" elevation="4">
          <p class="text-center">å…¨æ ˆ</p>
          <div class="language-icons">
            <img v-for="icon in FullstackIcons" :key="icon.icon" :src="`https://cdn.jsdelivr.net/npm/simple-icons@11.14.0/icons/${icon.icon}.svg`" :alt="icon.title" />
          </div>
        </v-card>
      </v-col>
    </div>

    <div style="height: 50vh"></div>

    <v-col cols="12">
      <v-card class="team-card pa-6" elevation="4">
        <h3 class="text-h5 font-weight-bold mb-4 text-center primary--text">
          <v-icon large color="primary" class="mr-2">mdi-account-group</v-icon>
          å¼€åˆ›äºº / ç¨‹åºå‘˜
        </h3>
        <v-divider class="mb-6"></v-divider>
        <v-row justify="center" align="center">
          <v-col v-for="member in teamMembers" :key="member.name" cols="auto" class="text-center">
            <v-hover v-slot="{ hover }">
              <v-avatar size="60" class="ma-3 team-member-avatar" :class="{ 'on-hover': hover }">
                <v-img :src="member.avatar" :alt="member.name">
                  <template v-slot:placeholder>
                    <v-row class="fill-height ma-0" align="center" justify="center">
                      <v-progress-circular indeterminate color="grey lighten-5"></v-progress-circular>
                    </v-row>
                  </template>
                </v-img>
              </v-avatar>
            </v-hover>
            <p class="mt-2 font-weight-medium">{{ member.name }}</p>
            <p class="caption text-caption">{{ member.role }}</p>
          </v-col>
        </v-row>
      </v-card>
    </v-col>

    <div style="height: 50vh"></div>

    <div class="join-us-section button-animation">
      <v-row justify="center" align="center" class="mt-10">
        <v-col cols="12" sm="8" md="6" lg="5">
            <h2 class="text-h4 font-weight-bold mb-4 text-center primary--text">
              ğŸŒŸ åŠ å…¥æˆ‘ä»¬
            </h2>
            <p class="text-body-1 text-center mb-6">
              å¹»äº‘ç§‘æŠ€æœŸå¾…æ‚¨çš„åŠ å…¥ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢ç§‘æŠ€çš„è¾¹ç•Œï¼Œå…±åŒåˆ›é€ ä¸€ä¸ªæ›´åŠ ç¾å¥½çš„æœªæ¥ã€‚
            </p>
            <div class="d-flex justify-center">
              <v-btn
                  x-large
                  color="primary"
                  class="mr-4 text-capitalize font-weight-bold"
                  elevation="2"
                  @click="register"
              >
                ç«‹å³æ³¨å†Œ
                <v-icon right>mdi-arrow-right</v-icon>
              </v-btn>
              <v-btn
                  x-large
                  outlined
                  color="secondary"
                  class="text-capitalize font-weight-bold"
                  @click="learnMore"
              >
                äº†è§£æ›´å¤š
                <v-icon right>mdi-information-outline</v-icon>
              </v-btn>
            </div>
        </v-col>
      </v-row>
    </div>
  </v-container>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import { gsap } from "gsap";

import { Flip } from "gsap/Flip";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import { Observer } from "gsap/Observer";
import { ScrollToPlugin } from "gsap/ScrollToPlugin";
import { Draggable } from "gsap/Draggable";
import { MotionPathPlugin } from "gsap/MotionPathPlugin";
import { EaselPlugin } from "gsap/EaselPlugin";
import { PixiPlugin } from "gsap/PixiPlugin";
import { TextPlugin } from "gsap/TextPlugin";
import Cookies from 'js-cookie';

import { useRouter } from 'vue-router'

const router = useRouter()

gsap.registerPlugin(Flip,ScrollTrigger,Observer,ScrollToPlugin,Draggable,MotionPathPlugin,EaselPlugin,PixiPlugin,TextPlugin);

const teamMembers = [
  { name: 'SoulCodingYanhun-å¼€åˆ›äºº', avatar: 'https://avatars.githubusercontent.com/u/155857563?v=4' },
];


const FrontendIcons = [
  { icon: 'angular', title: 'Angular' },
  { icon: 'react', title: 'React' },
  { icon: 'vuedotjs', title: 'Vue' },
  { icon: 'preact', title: 'Preact' },
  { icon: 'lit', title: 'Lit' },
  { icon: 'svelte', title: 'Svelte' },
  { icon: 'qwik', title: 'Qwik' },
  { icon: 'solid', title: 'Solid' },
  { icon: 'bootstrap', title: 'Bootstrap 5' },
  { icon: 'javascript', title: 'Javascript' },
  { icon: 'typescript', title: 'Typescript' },
  { icon: 'html5', title: 'Static' },
  { icon: 'emberdotjs', title: 'Ember' },
];

const BackendIcons = [
  { icon: 'nestjs', title: 'Nestjs' },
  { icon: 'express', title: 'Express' },
  { icon: 'koa', title: 'Koa' },
  { icon: 'graphql', title: 'Graphql' },
];

const FullstackIcons = [
  { icon:'astro', title: 'Astro Basics'},
  { icon:'astro', title: 'Astro Minimal'},
  { icon:'nextdotjs', title: 'Next.js'},
  { icon:'nuxtdotjs', title: 'Nuxt3'},
  { icon:'nuxtdotjs', title: 'Nuxt2'},
  { icon:'remix', title: 'Remix'},
  { icon:'svelte', title: 'Sveltekit'},
  { icon:'quasar', title: 'Quasar'},
  { icon:'gnubash', title: 'WebContainer API'},
]

const register = () => {
  const user = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : { login: false, time: 0 };

  if (!user.login) {
    // å¦‚æœ login ä¸º falseï¼Œåˆ™è·³è½¬åˆ°æ³¨å†Œé¡µé¢
    router.push('/register');
  } else {
    // å¦‚æœ login ä¸º trueï¼Œåˆ™è·³è½¬åˆ°ä¸ªäººèµ„æ–™é¡µé¢
    router.push('/profile');
  }

  // å¦‚æœ cookie ä¸­æ²¡æœ‰ user æ•°æ®ï¼Œåˆ™æ–°å»ºä¸€ä¸ª user æ•°æ®
  if (!Cookies.get('user')) {
    Cookies.set('user', JSON.stringify({ login: false, time: 0 }));
  }
};

const learnMore = () => {
  console.log('äº†è§£æ›´å¤šä¿¡æ¯');
};

const cards = ref([
  { id: 1, icon: '', title: 'ğŸ¨ æ¨¡æ¿åº“', description: 'æˆ‘ä»¬çš„æ¨¡æ¿åº“æ‹¥æœ‰ä¸°å¯Œå¤šæ ·çš„è®¾è®¡æ¨¡æ¿ï¼Œè¦†ç›–å„ç§é£æ ¼å’Œä¸»é¢˜ã€‚æ— è®ºæ˜¯å¯»æ‰¾çµæ„Ÿï¼Œè¿˜æ˜¯éœ€è¦å¿«é€Ÿå¯åŠ¨é¡¹ç›®ï¼Œè¿™é‡Œéƒ½èƒ½æ»¡è¶³æ‚¨çš„éœ€æ±‚ã€‚' },
  { id: 2, icon: '', title: 'ğŸ¤ äº¤æµç¤¾åŒº', description: 'å¹»äº‘ç§‘æŠ€çš„äº¤æµç¤¾åŒºæ˜¯ä¸€ä¸ªå……æ»¡æ´»åŠ›çš„ä¸“ä¸šç¤¾äº¤å¹³å°ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥ä¸æ¥è‡ªä¸–ç•Œå„åœ°çš„ä¸“ä¸šäººå£«å’Œåˆ›æ„äººå£«äº¤æµæƒ³æ³•ï¼Œåˆ†äº«ç»éªŒï¼Œå…±åŒæˆé•¿ã€‚' },
  { id: 3, icon: '', title: 'ğŸŒ æŠ€æœ¯æ”¯æŒ', description: 'æˆ‘ä»¬ä¸ºå‰ç«¯å’Œåç«¯å¼€å‘è€…æä¾›äº†å…¨é¢çš„æŠ€æœ¯æ”¯æŒã€‚æ— è®ºæ‚¨ä½¿ç”¨çš„æ˜¯å“ªç§æŠ€æœ¯ï¼Œæˆ‘ä»¬éƒ½æœ‰ä¸“ä¸šçš„èµ„æºå’Œå›¢é˜Ÿæ”¯æŒæ‚¨ã€‚' },
]);

onMounted(() => {


  gsap.from('.h11', { opacity: 0, y: -50, duration: 1, delay: 0.2 });
  gsap.from('.p11', { opacity: 0, y: 50, duration: 1, delay: 0.4 });
  // Page enter animation
  gsap.from('.page-enter-animation', {
    y: '100%',
    duration: 1,
    ease: 'power3.out',
  });

  // æ ‡é¢˜å’Œæ®µè½åŠ¨ç”»
  gsap.from('.title-animation', {
    x: -100,
    opacity: 0,
    duration: 1,
    ease: 'power3.out',
    scrollTrigger: {
      trigger: '.title-animation',
      start: 'top 80%',
      toggleActions: 'play none none reverse',
    },
  });

  gsap.from('.paragraph-animation', {
    x: 100,
    opacity: 0,
    duration: 1,
    ease: 'power3.out',
    scrollTrigger: {
      trigger: '.paragraph-animation',
      start: 'top 80%',
      toggleActions: 'play none none reverse',
    },
  });

  // ç« èŠ‚æ ‡é¢˜åŠ¨ç”»
  gsap.from('.section-title-animation', {
    y: -50,
    opacity: 0,
    duration: 1,
    ease: 'power3.out',
    scrollTrigger: {
      trigger: '.section-title-animation',
      start: 'top 80%',
      toggleActions: 'play none none reverse',
    },
  });

  // å¡ç‰‡åŠ¨ç”»
  gsap.from('.card-animation .card-hover', {
    y: 100,
    opacity: 0,
    duration: 1,
    ease: 'power3.out',
    stagger: 0.2,
    scrollTrigger: {
      trigger: '.card-animation',
      start: 'top 80%',
      toggleActions: 'play none none reverse',
    },
  });

  // Language icons animations
  gsap.from('.language-icons-animation .front-end .language-icons img', {
    x: -100,
    opacity: 0,
    duration: 0.5,
    stagger: 0.1,
    ease: 'power3.out',
    scrollTrigger: {
      trigger: '.front-end',
      start: 'top 80%',
      toggleActions: 'play none none reverse',
    },
  });

  gsap.from('.language-icons-animation .back-end .language-icons img', {
    x: 100,
    opacity: 0,
    duration: 0.5,
    stagger: 0.1,
    ease: 'power3.out',
    scrollTrigger: {
      trigger: '.back-end',
      start: 'top 80%',
      toggleActions: 'play none none reverse',
    },
  });

  gsap.from('.language-icons-animation .full-stack .language-icons img', {
    x: -100,
    opacity: 0,
    duration: 0.5,
    stagger: 0.1,
    ease: 'power3.out',
    scrollTrigger: {
      trigger: '.full-stack',
      start: 'top 80%',
      toggleActions: 'play none none reverse',
    },
  });

  // Team member card animation
  gsap.from(".team-member-animation", {
    y: 100,
    opacity: 0,
    duration: 1,
    ease: "power3.out",
    scrollTrigger: {
      trigger: ".team-member-animation",
      start: "top 80%",
      toggleActions: "play none none reverse",
    },
  });

  // Team member item animation
  gsap.from(".team-member-item-animation", {
    scale: 0,
    opacity: 0,
    duration: 0.5,
    ease: "power3.out",
    stagger: 0.1,
    scrollTrigger: {
      trigger: ".team-member-item-animation",
      start: "top 80%",
      toggleActions: "play none none reverse",
    },
  });

  // Button animations
  gsap.from('.button-animation .el-button', {
    y: 50,
    opacity: 0,
    duration: 1,
    stagger: 0.2,
    ease: 'power3.out',
    scrollTrigger: {
      trigger: '.button-animation',
      start: 'top 80%',
      toggleActions: 'play none none reverse',
    },
  });

  // æ–°æ·»åŠ çš„åŠ¨ç”»æ•ˆæœ
  gsap.from('.join-us-section', {
    opacity: 0,
    y: 50,
    duration: 1,
    ease: 'power3.out',
    scrollTrigger: {
      trigger: '.join-us-section',
      start: 'top 80%',
      toggleActions: 'play none none reverse',
    },
  });

  gsap.from('.join-us-card', {
    scale: 0.9,
    opacity: 0,
    duration: 0.8,
    ease: 'back.out(1.7)',
    scrollTrigger: {
      trigger: '.join-us-card',
      start: 'top 80%',
      toggleActions: 'play none none reverse',
    },
  });

  gsap.from('.button-animation .v-btn', {
    y: 20,
    opacity: 0,
    duration: 0.6,
    stagger: 0.2,
    ease: 'power3.out',
    scrollTrigger: {
      trigger: '.button-animation',
      start: 'top 80%',
      toggleActions: 'play none none reverse'
    }
  });
});

</script>

<style scoped>
.join-us-section {
  //background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  padding: 60px 0;
  border-radius: 16px;
  margin-top: 40px;
}

.join-us-card {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
}

.join-us-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 20px rgba(0, 0, 0, 0.1);
}

.home {
  text-align: center;
  margin: 0 auto;
  max-width: 800px;
  padding: 20px;
  font-family: 'Arial', sans-serif;
}

.text-gradient {
  background: linear-gradient(to right, rgb(235 125 247), rgb(0, 213, 255));
  -webkit-background-clip: text;
  color: transparent;
  /* font-size: 2em; */
}

h1 {
  font-weight: bold;
  color: #333;
  font-size: 2.5rem;
  margin-bottom: 1rem;
}

p {
  color: #666;
  font-size: 1rem;
}

.card-hover {
  transition: transform 0.3s ease-in-out;
  border-radius: 8px;
  padding: 16px;
}

.card-hover:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

button {
  border-radius: 4px;
  transition: background-color 0.3s;
  margin: 10px;
  padding: 10px 20px;
  cursor: pointer;
}

button:hover {
  background-color: #e0e0e0;
}

.v-icon {
  color: #1976d2;
  margin-bottom: 0.5rem;
}

.language-icons {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
}

.language-icons img {
  margin: 10px;
  width: 24px;
  height: 24px;
}

/* åª’ä½“æŸ¥è¯¢ï¼Œé’ˆå¯¹å°å±å¹•ä¼˜åŒ– */
@media (max-width: 600px) {
  .v-card {
    padding: 12px;
  }
}

/* é’ˆå¯¹è¶…å°å±å¹•çš„é¢å¤–æ ·å¼è°ƒæ•´ */
@media (max-width: 400px) {
  h2 {
    font-size: 1.2rem;
  }

  p {
    font-size: 0.9rem;
  }

  button {
    padding: 8px 16px;
    margin: 5px;
  }
}

.team-card {
  border-radius: 15px;
  transition: all 0.3s ease;
}

.team-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.1);
}

.team-member-avatar {
  border: 4px solid #fff;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
}

.team-member-avatar.on-hover {
  transform: scale(1.05);
  box-shadow: 0 6px 15px rgba(0,0,0,0.2);
}

.feature-card {
  transition: all 0.3s ease;
  border-radius: 8px;
  overflow: hidden;
}

.feature-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 20px rgba(0,0,0,0.1);
}

.v-card__text {
  flex-grow: 1;
}

.v-avatar {
  transition: all 0.3s ease;
}

.feature-card:hover .v-avatar {
  transform: scale(1.1);
}
</style>